<xml>
    <set name="PLATFORM" value="android-21" if="android" />
    <set name="HXCPP_CPP11" value="1" />

    <include name="${HXCPP}/build-tool/BuildCommon.xml" />

    <set name="ios" value="1" if="iphone" />
    <set name="tvos" value="1" if="appletv" />

    <set name="LIME_CAIRO" value="1" />
    <set name="LIME_CURL" value="1" unless="emscripten || winrt" />
    <set name="LIME_EFSW" value="1" if="windows || mac || linux" unless="winrt" />
    <set name="LIME_JPEG" value="1" />
    <!-- <set name="LIME_FAUDIO" value="1" /> -->
    <set name="LIME_FREETYPE" value="1" />
    <set name="LIME_HARFBUZZ" value="1" unless="winrt" />
    <!-- <set name="LIME_HASHLINK" value="1" if="windows || mac || linux" /> -->
    <set name="LIME_HASHLINK" value="1" if="hashlink" />
    <set name="LIME_LZMA" value="1" />
    <set name="LIME_MBEDTLS" value="1" unless="emscripten || winrt" />
    <!-- <set name="LIME_NEKO" value="1" if="linux" /> -->
    <set name="LIME_OGG" value="1" />
    <set name="LIME_OPENALSOFT" value="1" if="windows || linux || mac || android" unless="static_link" />
    <set name="LIME_OPENAL" value="1" if="iphone || emscripten || tvos" />
    <set name="LIME_MOJOAL" value="1" if="switch || static_link || winrt || mojoal" unless="LIME_OPENAL" />
    <unset name="LIME_OPENALSOFT" if="LIME_MOJOAL" />
    <set name="LIME_OPENAL" value="1" if="LIME_OPENALSOFT" />
    <set name="LIME_OPENAL" value="1" if="LIME_MOJOAL" />
    <set name="LIME_OPENGL" value="1" />
    <set name="LIME_PIXMAN" value="1" />
    <set name="LIME_PNG" value="1" />
    <set name="LIME_SDL" value="1" />
    <!-- <set name="LIME_SDL_ANGLE" value="1" if="windows" unless="static_link" /> -->
    <set name="LIME_SDL_ANGLE" value="1" if="windows LIME_SDL_ANGLE" unless="static_link" />
    <set name="LIME_SDL_ANGLE" value="1" if="windows angle" unless="static_link" />
    <set name="LIME_SDL_ANGLE" value="1" if="winrt" />
    <set name="LIME_TINYFILEDIALOGS" value="1" if="windows || mac || linux" unless="winrt || emscripten" />
    <set name="LIME_VORBIS" value="1" />
    <!-- <set name="LIME_VPX" value="1" />
    <set name="LIME_WEBM" value="1" /> -->
    <set name="LIME_ZLIB" value="1" />

    <set name="OUTPUT_DIR" value="../ndll" unless="OUTPUT_DIR" />

    <set name="NATIVE_TOOLKIT_HAVE_CAIRO" value="1" if="LIME_CAIRO" />
    <set name="NATIVE_TOOLKIT_HAVE_FREETYPE" value="1" if="LIME_FREETYPE" />
    <set name="NATIVE_TOOLKIT_HAVE_HARFBUZZ" value="1" if="LIME_HARFBUZZ" />
    <set name="NATIVE_TOOLKIT_HAVE_MBEDTLS" value="1" if="LIME_MBEDTLS" />
    <set name="NATIVE_TOOLKIT_HAVE_PNG" value="1" if="LIME_PNG" />
    <set name="NATIVE_TOOLKIT_HAVE_SDL" value="1" if="LIME_SDL" />

    <set name="NATIVE_TOOLKIT_SDL_STATIC" value="1" />
    <set name="NATIVE_TOOLKIT_SDL_ANGLE" value="1" if="LIME_SDL_ANGLE" />
    <set name="NATIVE_TOOLKIT_PATH" value="${PROJECT_DIR}/lib" />

    <files id="haxe">
        <files id="native-toolkit-cairo" if="LIME_CAIRO" />
        <files id="native-toolkit-curl" if="LIME_CURL" />
        <files id="native-toolkit-efsw" if="LIME_EFSW" />
        <files id="native-toolkit-faudio" if="LIME_FAUDIO" />
        <files id="native-toolkit-freetype" if="LIME_FREETYPE" />
        <files id="native-toolkit-harfbuzz" if="LIME_HARFBUZZ" />
        <files id="native-toolkit-jpeg" if="LIME_JPEG" />
        <files id="native-toolkit-lzma" if="LIME_LZMA" />
        <files id="native-toolkit-mbedtls" if="LIME_MBEDTLS" />
        <files id="native-toolkit-mojoal" if="LIME_MOJOAL" />
        <files id="native-toolkit-neko" if="LIME_NEKO" />
        <files id="native-toolkit-ogg" if="LIME_OGG" />
        <files id="native-toolkit-pixman" if="LIME_PIXMAN" />
        <files id="native-toolkit-png" if="LIME_PNG" />
        <files id="native-toolkit-sdl" if="LIME_SDL" unless="emscripten" />
        <files id="native-toolkit-tinyfiledialogs" if="LIME_TINYFILEDIALOGS" />
        <files id="native-toolkit-vpx" if="LIME_VPX" />
        <files id="native-toolkit-webm" if="LIME_WEBM" />
        <files id="native-toolkit-zlib" if="LIME_ZLIB" />

        <!--<files id="native-toolkit-openal" if="LIME_OPENALSOFT" />-->

        <include name="${NATIVE_TOOLKIT_PATH}/cairo/files.xml" />
        <include name="${NATIVE_TOOLKIT_PATH}/curl/files.xml" />
        <include name="${NATIVE_TOOLKIT_PATH}/efsw/files.xml" />
        <include name="${NATIVE_TOOLKIT_PATH}/faudio/files.xml" if="LIME_FAUDIO" />
        <include name="${NATIVE_TOOLKIT_PATH}/freetype/files.xml" />
        <include name="${NATIVE_TOOLKIT_PATH}/harfbuzz/files.xml" />
        <include name="${NATIVE_TOOLKIT_PATH}/jpeg/files.xml" />
        <include name="${NATIVE_TOOLKIT_PATH}/lzma/files.xml" />
        <include name="${NATIVE_TOOLKIT_PATH}/mbedtls/files.xml" />
        <include name="${NATIVE_TOOLKIT_PATH}/mojoal/files.xml" />
        <include name="${NATIVE_TOOLKIT_PATH}/neko/files.xml" />
        <include name="${NATIVE_TOOLKIT_PATH}/ogg/files.xml" />
        <include name="${NATIVE_TOOLKIT_PATH}/openal/files.xml" />
        <include name="${NATIVE_TOOLKIT_PATH}/pixman/files.xml" />
        <include name="${NATIVE_TOOLKIT_PATH}/png/files.xml" />
        <include name="${NATIVE_TOOLKIT_PATH}/tinyfiledialogs/files.xml" />
        <include name="${NATIVE_TOOLKIT_PATH}/vpx/files.xml" />
        <include name="${NATIVE_TOOLKIT_PATH}/webm/files.xml" />
        <include name="${NATIVE_TOOLKIT_PATH}/zlib/files.xml" />
        <include name="${NATIVE_TOOLKIT_PATH}/sdl/files.xml" />

        <compilerflag value="-Iinclude" />

		<section if="LIME_CAIRO">

			<compilerflag value="-I${NATIVE_TOOLKIT_PATH}/cairo/include" />
			<compilerflag value="-I${NATIVE_TOOLKIT_PATH}/cairo/include/configs/default/" unless="windows || mac || linux" />
			<compilerflag value="-I${NATIVE_TOOLKIT_PATH}/cairo/include/configs/linux/" if="linux" />
			<compilerflag value="-I${NATIVE_TOOLKIT_PATH}/cairo/include/configs/windows/" if="windows" />
			<compilerflag value="-I${NATIVE_TOOLKIT_PATH}/cairo/include/configs/mac/" if="mac" />
			<compilerflag value="-DLIME_CAIRO" />
			<compilerflag value="-DHAVE_CONFIG_H" />
			<compilerflag value="-DCAIRO_WIN32_STATIC_BUILD" if="windows" />
			<compilerflag value="-DCAIRO_HAS_FT_FONT" />

		</section>

		<section if="LIME_CURL">

			<compilerflag value="-I${NATIVE_TOOLKIT_PATH}/curl/include/" />
			<compilerflag value="-DLIME_CURL" />
			<compilerflag value="-DCURL_STATICLIB" />

		</section>

		<section if="LIME_EFSW">

			<compilerflag value="-I${NATIVE_TOOLKIT_PATH}/efsw/include/" />
			<compilerflag value="-DLIME_EFSW" />
		</section>

		<section if="LIME_FAUDIO">

			<compilerflag value="-I${NATIVE_TOOLKIT_PATH}/faudio/src" />
			<compilerflag value="-DLIME_FAUDIO" />
		</section>

		<section if="LIME_FREETYPE">

			<compilerflag value="-I${NATIVE_TOOLKIT_PATH}/freetype/include" />
			<compilerflag value="-DLIME_FREETYPE" />

			<section if="LIME_HARFBUZZ">

				<compilerflag value="-I${NATIVE_TOOLKIT_PATH}/harfbuzz/src" />
				<compilerflag value="-DLIME_HARFBUZZ" />
			</section>

		</section>

		<compilerflag value="-I${NATIVE_TOOLKIT_PATH}/hashlink/src" />

		<section if="LIME_HASHLINK">

			<compilerflag value="-DLIME_HASHLINK" />

		</section>

		<section unless="LIME_HASHLINK">

			<compilerflag value="-DLIBHL_EXPORTS" />

		</section>

		<section if="LIME_JPEG">

			<compilerflag value="-I${NATIVE_TOOLKIT_PATH}/jpeg/" />
			<compilerflag value="-DLIME_JPEG" />
		</section>

		<section if="LIME_LZMA">

			<compilerflag value="-I${NATIVE_TOOLKIT_PATH}/lzma/src" />
			<compilerflag value="-DLIME_LZMA" />
		</section>

		<section if="LIME_NEKO">

			<compilerflag value="-I${NATIVE_TOOLKIT_PATH}/neko/vm/" />
			<compilerflag value="-DLIME_NEKO" />
		</section>

		<section if="LIME_OGG">

			<compilerflag value="-I${NATIVE_TOOLKIT_PATH}/ogg/include/" />
			<compilerflag value="-I${NATIVE_TOOLKIT_PATH}/vorbis/include/" />
			<compilerflag value="-DLIME_OGG" />
		</section>

		<section if="LIME_OPENAL">

			<compilerflag value="-I${NATIVE_TOOLKIT_PATH}/openal/include/" unless="LIME_MOJOAL || emscripten" />
			<compilerflag value="-I${NATIVE_TOOLKIT_PATH}/mojoal/" if="LIME_MOJOAL" />
			<compilerflag value="-DLIME_OPENAL" />
			<compilerflag value="-DLIME_OPENALSOFT" if="LIME_OPENALSOFT" />
			<compilerflag value="-DLIME_MOJOAL" if="LIME_MOJOAL" />
			<compilerflag value="-DAL_LIBTYPE_STATIC=1" if="LIME_OPENALSOFT || LIME_MOJOAL" />
			<compilerflag value="-DAL_ALEXT_PROTOTYPES" if="LIME_OPENALSOFT" />
		</section>

		<section if="LIME_OPENGL">

			<compilerflag value="-DLIME_OPENGL" />
			<compilerflag value="-I${DEVELOPER_DIR}/Platforms/AppleTVOS.platform/Developer/SDKs/AppleTVOS${TVOS_VER}.sdk/" if="tvos" />
		</section>

		<section if="LIME_PNG">

			<compilerflag value="-I${NATIVE_TOOLKIT_PATH}/png/" />
			<compilerflag value="-I${NATIVE_TOOLKIT_PATH}/zlib/" />
			<compilerflag value="-DLIME_PNG" />
		</section>

		<section if="LIME_SDL">
			<section if="emscripten">

				<compilerflag value="-s" />
				<compilerflag value="USE_SDL=2" />

			</section>

			<section unless="emscripten">

				<compilerflag value="-I${NATIVE_TOOLKIT_PATH}/sdl/include/" />
				<compilerflag value="-I${NATIVE_TOOLKIT_PATH}/sdl/include/configs/default/" unless="windows || mac || linux || rpi" />
				<compilerflag value="-I${NATIVE_TOOLKIT_PATH}/sdl/include/configs/linux/" if="linux" unless="rpi" />
				<compilerflag value="-I${NATIVE_TOOLKIT_PATH}/sdl/include/configs/windows/" if="windows" unless="winrt" />
				<compilerflag value="-I${NATIVE_TOOLKIT_PATH}/sdl/include/configs/mac/" if="mac" />
				<compilerflag value="-I${NATIVE_TOOLKIT_PATH}/sdl/include/configs/rpi/" if="rpi" />
				<compilerflag value="-I${NATIVE_TOOLKIT_PATH}/sdl/include/configs/winrt/" if="winrt" />

				<compilerflag value="-DHAVE_LIBC" />

			</section>

			<section if="rpi">

				<compilerflag value="-I/opt/vc/include" />
				<compilerflag value="-I/opt/vc/include/interface/vcos/pthreads" />
				<compilerflag value="-I/opt/vc/include/interface/vmcs_host/linux" />
				<compilerflag value="-lbrcmGLESv2" />
				<compilerflag value="-lbrcmEGL" />
				<compilerflag value="-Wl,--no-undefined -lm -L/opt/vc/lib -lbcm_host -ldl -lpthread -lrt" />

			</section>

			<compilerflag value="-DLIME_SDL" />
			<compilerflag value="-DNATIVE_TOOLKIT_SDL_ANGLE" if="NATIVE_TOOLKIT_SDL_ANGLE" />
			<compilerflag value="-D__IPHONEOS__" if="ios || tvos" />
			<compilerflag value="-D__APPLETVOS__" if="tvos" />
			<compilerflag value="-DAPPLETV" if="tvos" />
		</section>

		<section if="LIME_TINYFILEDIALOGS">

			<compilerflag value="-I${NATIVE_TOOLKIT_PATH}/tinyfiledialogs/" />
			<compilerflag value="-DLIME_TINYFILEDIALOGS" />
		</section>

		<section if="LIME_VORBIS">
			<files id="native-toolkit-vorbis" if="LIME_VORBIS" />
			<include name="${PROJECT_DIR}/lib/vorbis/files.xml" />

			<compilerflag value="-I${NATIVE_TOOLKIT_PATH}/ogg/include/" />
			<compilerflag value="-I${NATIVE_TOOLKIT_PATH}/vorbis/include/" />
			<compilerflag value="-DLIME_VORBIS" />
		</section>

		<section if="LIME_ZLIB">

			<compilerflag value="-DSTATIC_LINK" if="emscripten || ios || tvos" />
			<compilerflag value="-DLIME_ZLIB" />
		</section>

		<compilerflag value="-I${PROJECT_DIR}/include/" />
		<compilerflag value="-I${PROJECT_DIR}/src/" />
    </files>
</xml>